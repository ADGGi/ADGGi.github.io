---
layout: post
title: "[Python]Iterator"
date: 2024-06-03 20:00:00 +0900
categories: [CS, Python]
tags: [CS, Python]
author: "ADG"
---

# 이터레이터 객체(Iterator)와 반복 가능한 객체(Iterable)

## 1. 이터레이터(Iterator)란?

**이터레이터(Iterator)**는 **파이썬**에서 객체를 순차적으로 접근할 수 있도록 해주는 중요한 개념입니다. 이터레이터는 **반복 가능한 객체(iterable)**에서 값을 하나씩 꺼내서 처리할 수 있는 객체를 말합니다.

일반적으로 리스트나 튜플과 같은 반복 가능한 객체(iterable)를 for문에서 사용할 때 내부적으로 이터레이터를 사용하여 반복을 처리합니다. 이터레이터는 __iter__() 메서드와 __next__() 메서드를 갖고 있는 객체입니다. 이러한 메서드는 이터레이터 객체가 반복할 수 있는 요소를 제공하는 데 사용됩니다.

> ### 이터레이터와 반복 가능한 객체의 차이점
> - **반복 가능한 객체(iterable)**: 리스트, 튜플, 문자열과 같은 객체들은 반복 가능한 객체입니다. 이 객체들은 값을 순차적으로 꺼낼 수 있는 **구조**를 가지고 있습니다.
> - **이터레이터(iterator)**: 반복 가능한 객체에서 값을 하나씩 꺼낼 수 있는 객체입니다. 이터레이터는 `next()` 함수를 통해 값을 하나씩 꺼낼 수 있으며, 더 이상 꺼낼 값이 없을 때 `StopIteration` 예외를 발생시킵니다.
>
>  |특징 | 이터레이터 | 리스트 | 튜플 |
>  | ---|---|---|---|
>  | 변경가능성 | 불변 | 가변 | 불변 |
>  | 메모리사용 | 값을 한 번에 메모리에 저장하지 않아 효율적 | 모든 값을 한 번에 메모리에 저장 | 리스트보다 적은 메모리 사용 |
>  | 순차적접근 | `next()`를 사용하여 순차적으로 값 접근 | 인덱스를 통해 임의의 위치에 빠르게 접근 가능 | 인덱스를 통해 임의의 위치에 빠르게 접근 가능 |

## 2. 이터레이터 객체 생성하기

파이썬에서 `iter()` 함수를 사용하여 반복 가능한 객체를 이터레이터로 변환할 수 있습니다. 이렇게 변환된 객체에서 `next()` 함수를 사용하여 값을 하나씩 꺼낼 수 있습니다.

```python
my_list = [1, 2, 3]
iterator = iter(my_list)  # 리스트를 이터레이터로 변환

# next() 함수로 하나씩 꺼낼 수 있음
print(next(iterator))  # 1
print(next(iterator))  # 2
print(next(iterator))  # 3
print(next(iterator))  # StopIteration 예외 발생
```

## 3. 이터레이터의 내부 동작

파이썬의 이터레이터는 내부적으로 **`__iter__()`**와 **`__next__()`** 메서드를 사용하여 동작합니다.

- **`__iter__()`**: 이 메서드는 이터레이터 객체 자체를 반환합니다. 대부분의 경우 self를 반환하여 자신을 반환합니다.  
- **`__next__()`**: 이 메서드는 이터레이터에서 다음 값을 반환합니다. 만약 값이 없으면 StopIteration 예외를 발생시킵니다.

파이썬에서는 사용자 정의 이터레이터를 만들 수도 있습니다. 사용자 정의 이터레이터는 `__iter__()`와 `__next__()` 메서드를 정의하여 값을 순차적으로 반환하도록 할 수 있습니다.

```python
class MyIterator:
    def __init__(self, start, end):
        self.current = start
        self.end = end
    
    def __iter__(self):
        return self  # 이터레이터 객체 자체를 반환
    
    def __next__(self):
        if self.current >= self.end:
            raise StopIteration  # 끝에 도달하면 StopIteration 예외를 발생
        self.current += 1
        return self.current - 1

# 사용자 정의 이터레이터 사용
my_iter = MyIterator(1, 4)
for num in my_iter:
    print(num)

# 1
# 2
# 3
```

## 4. 반복 가능한 객체(Iterable)

파이썬에서 반복 가능한 객체(Iterable)란 for문을 사용할 수 있는 객체를 의미합니다. 예를 들어, 리스트, 튜플, 문자열, 딕셔너리 등이 반복 가능한 객체입니다. 이러한 반복 가능한 객체들은 내부적으로 이터레이터를 생성할 수 있는 메서드를 갖고 있습니다. 이터레이터 객체는 for문에서 사용될 수 있으며, 반복을 위해 `next()` 메서드를 호출하여 각 항목을 반환합니다.

> ### `for`문 내부에서 이터레이터 동작 방식
>
> `for`문이 실행될 때, 반복 가능한 객체(Iterable)는 이터레이터로 변환됩니다. `for`문은 내부적으로 `__iter__()` 메서드를 호출하여 이터레이터 객체를 얻고, `__next__()` 메서드를 호출하여 항목을 하나씩 반환합니다. 더 이상 반환할 항목이 없으면 `StopIteration` 예외가 발생하고, 이 예외는 `for`문 내부에서 처리되어 반복이 종료됩니다.
>
> ### 이터레이터를 사용한 `for`문의 작동 과정
>
> 1. **반복 가능한 객체(Iterable, 리스트나 튜플)**이 제공됩니다.
> 2. `for`문이 시작되면, 반복 가능한 객체는 `iter()`함수를 통해 이터레이터로 변환됩니다.
> 3. 이터레이터는 `next()` 메서드를 통해 값을 하나씩 반환합니다.
> 4. `for`문은 각 항목을 하나씩 받아 처리하고, 더 이상 값이 없으면 반복을 종료합니다.