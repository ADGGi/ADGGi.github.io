---
layout: post
title: "[백준]26043번 식당 메뉴(Python3)"
date: 2024-06-11 20:00:00 +0900
categories: [CS, 백준]
tags: [CS, 백준]
author: "ADG"
---

# 문제

여러 명의 학생이 식사하기 위하여 학교 식당을 향해 달려가고 있다. 학교 식당에 도착한 학생은 식당 입구에 줄을 서서 대기한다. 학교 식당에 먼저 도착한 학생이 나중에 도착한 학생보다 식당 입구의 앞쪽에서 대기한다. 식사는 1인분씩 준비된다. 식사 1인분이 준비되면 식당 입구의 맨 앞에서 대기 중인 학생 1명이 식당으로 들어가서 식사를 시작한다. 식사를 시작한 학생은 항상 식사를 마친다.

학교 식당에서는 두 가지 메뉴가 제공되고 각각의 학생은 두 가지 메뉴 중에서 본인이 좋아하는 메뉴를 결정한 상태다. 학생이 학교 식당에 도착하고 식사가 준비되는 n개의 정보가 저장된 S가 주어진다. S에 저장된 첫 번째 정보부터 n번째 정보까지 순서대로 처리한 경우, 본인이 좋아하는 메뉴를 먹은 학생 목록 A와 본인이 좋아하지 않는 메뉴를 먹은 학생 목록 B와 학교 식당에 도착하였으나 식사를 하지 못한 학생 목록 C를 출력하자.

S에 저장된 n개의 식당 정보는 아래 두 가지 유형으로 구분된다. 첫 번째가 유형 1, 두 번째가 유형 2다.

1 a b: 학생 번호가 양의 정수 a이고 좋아하는 메뉴 번호가 양의 정수 b인 학생 1명이 학교 식당에 도착하여 식당 입구의 맨 뒤에 줄을 서기 시작한다.  

2 b: 메뉴 번호가 양의 정수 b인 식사 1인분이 준비되어 식당 입구의 맨 앞에서 대기 중인 학생 1명이 식사를 시작한다.

식사 1인분이 준비될 때는 식당 입구에서 대기 중인 학생이 항상 존재한다. 식당 입구에 줄을 서서 대기하였으나 식사가 준비 안 된 학생은 식사를 못 한다.

---

### 입력

첫 번째 줄에 n이 주어진다.

두 번째 줄부터 n개의 줄에 걸쳐 한 줄에 하나의 정보가 주어진다. 각 정보는 유형 1, 2중 하나이다.

---

### 출력

첫 번째 줄에 학생 목록 A에 있는 학생 번호를 빈칸을 사이에 두고 오름차순으로 출력한다.

두 번째 줄에 학생 목록 B에 있는 학생 번호를 빈칸을 사이에 두고 오름차순으로 출력한다.

세 번째 줄에 학생 목록 C에 있는 학생 번호를 빈칸을 사이에 두고 오름차순으로 출력한다.

학생 목록에 학생이 없는 경우 학생 번호 대신 None을 출력한다.

---

### 제한

- 1 <= `n` <= 500,000  
- `S`에는 유형 1, 유형 2만 저장되어 있다.  
- 1 <= `a` <= `n`, 모든 양의 정수 `a`의 값은 서로 다르다.  
- `b`는 1 또는 2이다.

---

### 예제 입력 1

6  
1 2 1  
1 1 1  
2 1  
1 3 2  
2 2  
2 2  

---

### 예제 출력 1

2 3  
1  
None

첫 번째 1 2 1을 처리한 후, 대기 줄은 (2 1)이 된다. (2 1)에서 2는 학생 번호, 1은 좋아하는 메뉴 번호를 나타낸다.

두 번째 1 1 1을 처리한 후, 대기 줄은 (2 1) (1 1)이 된다. (1 1)에서 앞쪽 1은 학생 번호, 뒤쪽 1은 좋아하는 메뉴 번호를 나타낸다. 2번 학생이 앞쪽, 1번 학생이 뒤쪽에서 대기 중임을 나타낸다.

세 번째 2 1을 처리하면, 앞쪽에서 대기 중인 2번 학생이 대기 줄을 나와서 식사를 하므로 대기 줄은 (1 1)이 된다. 2번 학생이 좋아하는 메뉴 번호는 1이고 먹은 음식도 1번이므로 학생 목록 A에 2번 학생을 추가한다.

네 번째 1 3 2를 처리한 후, 대기 줄은 (1 1) (3 2)가 된다. (3 2)에서 3은 학생 번호, 2는 좋아하는 메뉴 번호를 나타낸다. 1번 학생이 앞쪽, 3번 학생이 뒤쪽에서 대기 중임을 나타낸다.

다섯 번째 2 2를 처리하면, 앞쪽에서 대기 중인 1번 학생이 대기 줄을 나와서 식사를 하므로 대기 줄은 (3 2)가 된다. 1번 학생이 좋아하는 메뉴 번호는 1이고 먹은 음식은 2번이므로 학생 목록 B에 1번 학생을 추가한다.

여섯 번째 2 2를 처리하면, 앞쪽에서 대기 중인 3번 학생이 대기 줄을 나와서 식사를 하므로 대기 줄에는 아무도 없다. 3번 학생이 좋아하는 메뉴 번호는 2이고 먹은 음식도 2번이므로 학생 목록 A에 3번 학생을 추가한다.

여섯 개의 정보를 모두 처리한 후 대기 줄에는 학생이 없으므로 식사를 못 하는 학생은 없다. 따라서 학생 목록 C에는 학생이 없다.

---

### 풀이

- 학생이 도착할 때마다 대기열에 추가  
- 메뉴가 준비되면 대기열의 맨 앞 학생이 식사  
  -> FIFO  
- 메뉴가 준비되면 제공된 메뉴를 먹는다. (좋아하는 메뉴를 먹었는지, 아닌지 구별이 필요)  
- 대기열에 남아있는 학생은 식사를 못 한 학생, 만약 남아있는 학생이 없다면 `None` 출력   

```python
import sys
from collections import deque

def process_student_meals(n, S):
    queue = deque()  # 대기열을 위한 deque
    liked = set()    # 좋아하는 메뉴를 먹은 학생 목록
    disliked = set() # 좋아하지 않는 메뉴를 먹은 학생 목록
    missed = set()   # 식사를 못한 학생 목록
    
    for info in S:
        if info[0] == 1:  # 학생이 도착
            a, b = info[1], info[2]
            queue.append((a, b))  # 학생 번호와 좋아하는 메뉴를 대기열에 추가
        
        elif info[0] == 2:  # 메뉴가 준비됨
            b = info[1]
            student, liked_menu = queue.popleft()  # 대기열에서 맨 앞 학생 처리
            
            if liked_menu == b:
                liked.add(student)  # 좋아하는 메뉴를 먹음
            else:
                disliked.add(student)  # 좋아하지 않는 메뉴를 먹음
    
    # 대기열에 남은 학생들은 식사를 못한 학생들
    while queue:
        student, _ = queue.popleft()
        missed.add(student)
    
    # 결과 출력
    def print_list(students_set):
        if students_set:
            print(" ".join(map(str, sorted(students_set))))
        else:
            print("None")
    
    print_list(liked)
    print_list(disliked)
    print_list(missed)

# 입력 받기
input = sys.stdin.read
data = input().splitlines()

n = int(data[0])  # 첫 번째 줄은 n
S = []

# 두 번째 줄부터 n개의 줄에 걸쳐 정보 처리
for i in range(1, n + 1):
    S.append(tuple(map(int, data[i].split())))

process_student_meals(n, S)
```
